<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description"
        content="Soccer Math - A fun math game for 4th graders. Score goals by solving math problems!">
    <meta name="theme-color" content="#1a472a">
    <title>Soccer Math</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=3.10">
</head>

<body>
    <div class="stadium-lights"></div>
    <div class="crowd-noise"></div>

    <!-- Background Music -->
    <audio id="bgm-audio" loop>
        <source src="bgm-latin-coldise.mp3" type="audio/mpeg">
    </audio>



    <main class="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen active">
            <div class="screen-header"
                style="position: absolute; top: 10px; right: 10px; width: auto; display: flex; gap: 10px; justify-content: flex-end;">
                <button id="start-music-btn" class="icon-btn music-toggle-btn" aria-label="Toggle Music">üîá</button>
            </div>
            <div class="logo">
                <span class="ball-icon">‚öΩ</span>
                <h1>Soccer Math</h1>
                <span class="ball-icon">‚öΩ</span>
            </div>
            <p class="tagline">Score goals with math!</p>

            <div class="high-score-display">
                <span class="trophy">üèÜ</span>
                <span>Best Score: <strong id="high-score-value">0</strong></span>
            </div>

            <!-- Mode Selection -->
            <div class="mode-selection">
                <div class="mode-group">
                    <label class="mode-label">Operation</label>
                    <div class="toggle-buttons" id="operation-toggle">
                        <button class="toggle-btn active" data-value="multiplication">√ó Multiply</button>
                        <button class="toggle-btn" data-value="division">√∑ Divide</button>
                    </div>
                </div>

                <div class="mode-group">
                    <label class="mode-label">Game Mode</label>
                    <div class="toggle-buttons" id="game-mode-toggle">
                        <button class="toggle-btn active" data-value="practice">üéØ Practice</button>
                        <button class="toggle-btn" data-value="tournament">üèÜ Tournament</button>
                    </div>
                    <span class="mode-hint" id="game-mode-hint">Multiple choice ‚Ä¢ No timer</span>
                </div>
            </div>

            <div class="start-actions">
                <button id="start-btn" class="btn btn-primary">
                    <span class="btn-icon">‚ñ∂</span>
                    Kick Off!
                </button>
                <button id="view-cards-btn" class="btn btn-secondary">
                    <span class="btn-icon">üé¥</span>
                    My Cards
                </button>
                <button id="start-settings-btn" class="btn btn-secondary">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    Settings
                </button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Scoreboard -->
            <div class="scoreboard">
                <div class="score-section">
                    <span class="label">GOALS</span>
                    <span id="score" class="value">0</span>
                </div>
                <div class="timer-section" id="timer-section">
                    <span id="timer" class="timer-value">1:30</span>
                </div>
                <!-- Small Quit Button in Header -->
                <div class="header-controls">
                    <button id="game-music-btn" class="icon-btn music-toggle-btn" aria-label="Toggle Music">üîá</button>
                    <button id="settings-btn" class="icon-btn" aria-label="Settings">‚öôÔ∏è</button>
                    <button id="quit-btn" class="icon-btn" aria-label="Quit Game" style="display: none;">‚úï</button>
                </div>
                <button id="done-btn" class="done-btn" style="display: none;">
                    ‚úì Done
                </button>
                <div class="streak-section">
                    <span class="label">STREAK</span>
                    <span id="streak" class="value">0</span>
                    <span class="streak-fire" id="streak-fire">üî•</span>
                </div>
            </div>

            <!-- Level Indicator -->
            <div class="level-indicator">
                <span id="level-text">Level 1</span>
                <div class="level-dots">
                    <span class="dot active" id="dot-1"></span>
                    <span class="dot" id="dot-2"></span>
                    <span class="dot" id="dot-3"></span>
                </div>
            </div>

            <!-- Level Up Celebration -->
            <div class="level-up-celebration" id="level-up-celebration">
                <div class="level-up-content">
                    <span class="level-up-emoji">üéâ</span>
                    <span class="level-up-text" id="level-up-text">LEVEL UP!</span>
                    <span class="level-up-emoji">‚≠ê</span>
                </div>
            </div>

            <!-- Quit Confirmation Modal -->
            <div class="modal-overlay" id="quit-modal">
                <div class="modal-content">
                    <h3>Quit Tournament?</h3>
                    <p>You will lose any cards found in this game!</p>
                    <div class="modal-actions">
                        <button id="cancel-quit-btn" class="btn btn-secondary">Cancel</button>
                        <button id="confirm-quit-btn" class="btn btn-danger">Quit Game</button>
                    </div>
                </div>
            </div>

            <!-- Lucky Block Reward -->
            <div class="lucky-block-overlay" id="lucky-block-overlay">
                <div class="lucky-block-container">
                    <div class="lucky-block" id="lucky-block">
                        <span class="block-icon">üéÅ</span>
                    </div>
                    <div class="card-reveal" id="card-reveal">
                        <div class="card-emoji" id="card-emoji"></div>
                        <div class="card-name" id="card-name"></div>
                        <div class="card-rarity" id="card-rarity"></div>
                        <div class="card-stats-grid" id="card-stats"></div>
                        <div class="tap-continue">Tap to continue</div>
                    </div>
                </div>
            </div>

            <!-- Streak Bonus Wheel Overlay -->
            <div class="streak-wheel-overlay" id="streak-wheel-overlay">
                <div class="streak-wheel-container">
                    <h2 class="wheel-title">üî• STREAK BONUS! üî•</h2>
                    <p class="wheel-subtitle">Spin for a rare card!</p>

                    <div class="wheel-wrapper">
                        <div class="wheel-pointer">‚ñº</div>
                        <div class="wheel" id="bonus-wheel">
                            <span class="wheel-label legendary">Legendary</span>
                            <span class="wheel-label mythical">Mythical</span>
                            <span class="wheel-label godly">Godly</span>
                        </div>
                    </div>

                    <div class="wheel-result" id="wheel-result">
                        <!-- Card will be shown here after spin -->
                    </div>
                </div>
            </div>

            <!-- Goal Net Area -->
            <div class="goal-area">
                <div class="goal-net">
                    <div class="net-pattern"></div>
                    <div class="goal-post left"></div>
                    <div class="goal-post right"></div>
                    <div class="crossbar"></div>
                </div>

                <!-- Question Card -->
                <div class="question-card" id="question-card">
                    <div class="question-content">
                        <span id="num1" class="number">7</span>
                        <span id="operator" class="operator">√ó</span>
                        <span id="num2" class="number">8</span>
                        <span class="equals">=</span>
                        <span class="question-mark">?</span>
                    </div>
                </div>

                <!-- Ball Animation -->
                <div class="ball" id="ball">‚öΩ</div>
            </div>

            <!-- Answer Choices (Multiple Choice Mode) -->
            <div class="answers-grid" id="answers-grid">
                <button class="answer-btn" data-index="0">56</button>
                <button class="answer-btn" data-index="1">54</button>
                <button class="answer-btn" data-index="2">48</button>
                <button class="answer-btn" data-index="3">63</button>
            </div>

            <!-- Typing Input (Typing Mode) -->
            <div class="typing-area" id="typing-area" style="display: none;">
                <input type="number" id="answer-input" class="answer-input" placeholder="?" inputmode="numeric"
                    pattern="[0-9]*" autocomplete="off">
                <button id="submit-answer-btn" class="btn btn-primary submit-btn">
                    <span class="btn-icon">‚öΩ</span>
                    Kick!
                </button>
            </div>

            <!-- On-Screen Number Pad (Mobile) -->
            <div class="number-pad" id="number-pad" style="display: none;">
                <button class="num-btn" data-value="7">7</button>
                <button class="num-btn" data-value="8">8</button>
                <button class="num-btn" data-value="9">9</button>
                <button class="num-btn" data-value="4">4</button>
                <button class="num-btn" data-value="5">5</button>
                <button class="num-btn" data-value="6">6</button>
                <button class="num-btn" data-value="1">1</button>
                <button class="num-btn" data-value="2">2</button>
                <button class="num-btn" data-value="3">3</button>
                <button class="num-btn backspace" data-value="backspace">‚å´</button>
                <button class="num-btn" data-value="0">0</button>
                <button class="num-btn clear" data-value="clear">C</button>
            </div>

            <!-- Feedback Messages -->
            <div class="feedback" id="feedback">
                <span class="feedback-text"></span>
            </div>
        </div>

        <!-- My Cards Gallery Screen -->
        <div id="gallery-screen" class="screen">
            <div class="gallery-header">
                <h2>My Card Collection</h2>
                <button id="gallery-home-btn" class="btn btn-secondary">Home</button>
            </div>

            <div class="gallery-stats">
                <div class="gallery-stat">
                    <span class="label">Total Cards</span>
                    <span id="total-cards-count" class="value">0</span>
                </div>
                <div class="gallery-stat">
                    <span class="label">Unique</span>
                    <span id="unique-cards-count" class="value">0</span>
                </div>
            </div>

            <div class="gallery-grid" id="gallery-grid">
                <!-- Cards dynamically added here -->
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <div class="final-whistle">
                <span class="whistle-icon">üì£</span>
                <h2>Final Whistle!</h2>
            </div>

            <div class="final-stats">
                <div class="stat-card goals-scored">
                    <span class="stat-icon">‚öΩ</span>
                    <span class="stat-label">Goals Scored</span>
                    <span id="final-score" class="stat-value">0</span>
                </div>

                <div class="stat-card best-streak">
                    <span class="stat-icon">üî•</span>
                    <span class="stat-label">Best Streak</span>
                    <span id="final-streak" class="stat-value">0</span>
                </div>

                <div class="stat-card accuracy">
                    <span class="stat-icon">üéØ</span>
                    <span class="stat-label">Accuracy</span>
                    <span id="final-accuracy" class="stat-value">0%</span>
                </div>
            </div>

            <div class="new-record" id="new-record">
                <span>üèÜ NEW RECORD! üèÜ</span>
            </div>

            <!-- My Cards Section -->
            <div class="my-cards-section" id="my-cards-section">
                <h3 class="my-cards-title">üé¥ My Cards</h3>
                <div class="my-cards-grid" id="my-cards-grid">
                    <!-- Cards will be dynamically inserted here -->
                </div>
            </div>

            <div class="game-over-actions">
                <button id="play-again-btn" class="btn btn-primary">
                    <span class="btn-icon">üîÑ</span>
                    Play Again
                </button>
                <button id="home-btn" class="btn btn-secondary">
                    <span class="btn-icon">üè†</span>
                    Home
                </button>
            </div>
        </div>
    </main>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2>Settings</h2>

            <div class="setting-group">
                <label for="timer-select">Tournament Timer:</label>
                <select id="timer-select">
                    <option value="60">1 Minute</option>
                    <option value="180">3 Minutes</option>
                    <option value="300">5 Minutes</option>
                    <option value="600" selected>10 Minutes</option>
                    <option value="1200">20 Minutes</option>
                </select>
            </div>

            <div class="setting-group">
                <label for="level-select">Starting Level:</label>
                <select id="level-select">
                    <option value="1" selected>Level 1 (√ó1, √ó2, √ó5, √ó10)</option>
                    <option value="2">Level 2 (√ó3, √ó4, √ó6)</option>
                    <option value="3">Level 3 (√ó7, √ó8, √ó9, √ó11, √ó12)</option>
                </select>
            </div>

            <div class="modal-buttons">
                <button id="save-settings-btn" class="btn primary-btn">Save & Close</button>
            </div>

            <div class="about-section">
                <p class="version">Version 1.1.0</p>
                <p class="license">Released under <a href="https://github.com/edgevolt/soccer-math" target="_blank">MIT
                        License</a></p>
                <p class="credits">Music: <a href="https://unminus.gumroad.com/l/coldise-latin" target="_blank">Latin by
                        Coldise</a></p>
            </div>
        </div>
    </div>

    <script src="game.js?v=3.22"></script>
</body>

</html>